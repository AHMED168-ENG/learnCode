<!-- Preloader -->
<!-- <div class="preloader flex-column justify-content-center align-items-center">
  <img class="animation__shake" src="/p/img/Sahlan-Favicon.png" alt="Sahlan logo" height="76" width="123" />
</div> -->

<!-- Navbar -->
<nav class="main-header navbar navbar-expand navbar-dark navbar-light">
  <ul class="navbar-nav ml-auto">
    <li class="nav-item">
      <a class="nav-link" style="font-size: 12px;" href="/destination">
        Explore Destinations
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" style="font-size: 12px;" href="/trip/new">
        Plan Your Trip
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" style="font-size: 12px;" href="/event/calendar">
        Events
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" style="font-size: 12px;" href="/trip/calendar">
        Trips Calendar
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" style="font-size: 12px;" href="#">
        Stores
      </a>
    </li>
    <li class="travelitem">
      <a class="nav-link" style="font-size: 12px;" href="#">
        Travel Essentials
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" style="font-size: 12px;" href="#">
        Public filter about destinations
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" style="font-size: 12px;" href="#">
        Request ads
      </a>
    </li>
    <li class="nav-item">
      <button class="nav-link btn btn-none" style="font-size: 12px;" onclick="changeLang('ar')">ar</button>
    </li>
    <li class="nav-item">
      <button class="nav-link btn btn-none" style="font-size: 12px;" onclick="changeLang('en')">en</button>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-widget="fullscreen" href="#" role="button">
        <i class="fas fa-expand-arrows-alt"></i>
      </a>
    </li>
    <li class="nav-item">
      <a class="btn btn-outline-warning" id="logout" href="/dashboard/user/logout" role="button">Logout</a>
    </li>
  </ul>
</nav>
<!-- /.navbar -->

<!-- Main Sidebar Container -->
<aside class="main-sidebar sidebar-dark-primary elevation-4">
  <!-- Brand Logo -->
  <a href="/" class="brand-link" style="font-size: 1em">
    <img src="/p/img/Sahlan-Favicon.png" alt="AdminLTE Logo" class="brand-image mt-1" style="opacity: 0.8; height: 1.1em" />
    <span class="brand-text font-weight-light">SAHLAN App</span>
  </a>
  <div class="sidebar">
    <!-- Sidebar user panel (optional) -->
    <div class="user-panel mt-3 pb-3 mb-3 d-flex" id="user-title">
      <div class="row ml-4">
        <img class="rounded-circle p-0" width=45 height=45 src="/p/img/avatar.png" alt="Image">
        <span class="text-center text-light mt-1 ml-1"><a href="/home" style="font-size: 18px;">Ahmed Mohamed</a></span>
      </div>
    </div>

    <!-- Sidebar Menu -->
    <nav class="mt-2">
      <ul class="nav nav-pills nav-sidebar flex-column nav-flat" data-widget="treeview" role="menu" data-accordion="false" id="sidebar">
        <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
        <li class="nav-item mb-2">
          <a href="/dashboard/home" class="nav-link" id="home">
            <i class="nav-icon fas fa-tachometer-alt"></i>
            <p>Sahlan Dashboard</p>
          </a>
        </li>
        <li class="nav-item">
          <a href="/favourite" class="nav-link" id="favourites">
            <i class="nav-icon fas fa-star text-success_"></i>
            <p style="font-size: 13px;">
              My Favourites
            </p>
          </a>
        </li>
        <li class="nav-item">
          <a href="/destination" class="nav-link" id="destination-management">
            <i class="nav-icon fas fa-globe-americas text-success_"></i>
            <p style="font-size: 13px;">
              Explore Destinations
            </p>
          </a>
        </li>
        <li class="nav-item">
          <a href="/trip/new" class="nav-link">
            <i class="nav-icon fas fa-circle"></i>
            <p style="font-size: 13px;">Plan Your Trip</p>
          </a>
        </li>
        <li class="nav-item">
          <a href="/event/calendar" class="nav-link">
            <i class="nav-icon fas fa-list text-success_"></i>
            <p style="font-size: 13px;">
              Events
              <span class="badge badge-warning right" id="events">0</span>
            </p>
          </a>
        </li>
        <li class="nav-item">
          <a href="/trip/calendar" id="tourist-management" class="nav-link">
            <i class="nav-icon far fa-calendar textss-maroon"></i>
            <p style="font-size: 13px;">
              Trips Calendar
            </p>
          </a>
        </li>
        <li class="nav-item has-treeview">
          <a href="/store" class="nav-link" id="report">
            <i class="nav-icon fas fa-store"></i>
            <p style="font-size: 13px;">
              Stores
            </p>
          </a>
        </li>
        <li class="nav-item">
          <a href="/travel" class="nav-link">
            <i class="nav-icon fas fa-plane"></i>
            <p style="font-size: 13px;">
              Travel Essentials
            </p>
          </a>
        </li>
        <li class="nav-item">
          <a href="/destination-place" class="nav-link" id="destination-place">
            <i class="nav-icon fas fa-map-marked text-success_"></i>
            <p style="font-size: 13px;">
              Public filter about destinations
              <span class="badge badge-success right" id="mostPopularPlaces">0</span>
            </p>
          </a>
        </li>
        <li class="nav-item">
          <a href="/ads" class="nav-link" id="ads">
            <i class="nav-icon fas fa-tag"></i>
            <p style="font-size: 13px;">
              Request Advertisements
              <span class="badge badge-warning right" id="numAds">0</span>
            </p>
          </a>
        </li>
        <li class="nav-item has-treeview">
          <a href="/restaurant" class="nav-link" id="report">
            <i class="nav-icon fas fa-store"></i>
            <p style="font-size: 13px;">
              Restaurant
            </p>
          </a>
        </li>
      </ul>
    </nav>
    <!-- /.sidebar-menu -->
  </div>
</aside>
<script>
  var language = "en";
  getHomeData(language);
  function getHomeData(lang) {
    fetch(`/home?lang=${lang}`, { method: "GET" }).then((response) => response.json()).then((data) => {
      $('#lang').html(`<a class="nav-link" style="font-size: 13px;" onclick="changeLang('${data.lang}')">${data.lang}</a>`);
      if (data.user) {
        $('#user-title').append(`
          <div class="row">
            <img class="rounded-circle p-0" width=45 height=45 src="/p/img/${data.user.user_img}" alt="Image">
            <span class="text-center">${data.user.username}</span>
          </div>
        `);
      }
    });
  }
  function changeLang(lang) {
    const settings = {
        async: true,
        crossDomain: true,
        url: `${window.location.pathname}?lang=${lang === "ar" ? "ar" : "en"}`,
        method: "Get",
    };
    $.ajax(settings).done(function (res, textStatus) {
        console.log(res.data)
    }).fail(() => {});
    fetch(`${window.location.pathname}?lang=${lang === "ar" ? "ar" : "en"}`, { method: "GET" }).then((response) => response.json());
  }
</script>
